"use strict";
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
Object.defineProperty(exports, "__esModule", { value: true });
var apollo_fetch_1 = require("apollo-fetch");
var extract_files_1 = require("extract-files");
exports.ReactNativeFile = extract_files_1.ReactNativeFile;
function constructUploadOptions(requestOrRequests, options) {
    var files = extract_files_1.extractFiles(requestOrRequests);
    if (files.length) {
        if (typeof FormData === 'undefined') {
            throw new Error('Environment must support FormData to upload files.');
        }
        options.method = 'POST';
        options.body = new FormData();
        options.body.append('operations', JSON.stringify(requestOrRequests));
        files.forEach(function (_a) {
            var path = _a.path, file = _a.file;
            return options.body.append(path, file);
        });
        return options;
    }
    return apollo_fetch_1.constructDefaultOptions(requestOrRequests, options);
}
exports.constructUploadOptions = constructUploadOptions;
function createApolloFetchUpload(params) {
    if (params === void 0) { params = {}; }
    return apollo_fetch_1.createApolloFetch(__assign({}, params, { constructOptions: constructUploadOptions }));
}
exports.createApolloFetchUpload = createApolloFetchUpload;
//# sourceMappingURL=index.js.map